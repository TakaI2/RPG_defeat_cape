#目的
これまでの成果をふまえて、アクションゲームをつくりたい。
プレイヤーやNPCが相互にインタラクションし、リアリティを高めたい。

既存のできている機能や、プロジェクト内のスクリプト、プラグインなどを活用し、実現のアイデアと、ロードマップを考案してほしい。

また、テストケースなども考案したい。


アクションゲームを作るために
以下のような機能を実現したい

###操作
基本的にマウス操作
PlayerControllerの操作を発展。　マウスで右クリックした場所に移動
マウスで左クリックした場所に攻撃、マウスで左クリックした対象がインタラクション可能なオブジェクトなら対応した行動。　インタラクション可能なオブジェクトはタグなどで区別し、対応した行動をとる。
行動の種類やタグの対応は以下のような感じ

##行動と操作

#攻撃行動（対象タグ：Enemyもしくはタグなし）
Attack:近接攻撃　…　Enemyオブジェクトにある程度近づいたときにマウスの左クリック
Magic:遠距離攻撃　…　マウスがさしている場所に魔法攻撃。

#日常行動(対象タグ:objectそこからgrabbable, eatable,などの属性で分岐)
grab:物をもつ、置く
touch:触る、ボタンを押す、など。
eat: 手に取ったものを口に運んで食べる。
sit: イスに座る、バイクなどに跨るなど。
stomp: 特定の場所に足を乗せる。

#感情行動(対象：Player, Chara)
talk:話す、コミュニケーションする、メッセージウィンドウにセリフを表示し、口パクする（aa ee などセリフの母音に合わせて口を動かす）
kiss:相手の頬や口にキスする
hug: 相手の体や顔に手を触れる。

#移動行動
walk: 歩く
fly: 浮く（高速で移動時）

これらの行動をIKやアニメーションを用いて行い、表情の変化や視点の変更も伴う
例：grabで物をつかむとき、持ちあげるときはオブジェクトに視線を合わせる。
例：eatで物を食べる時、口を開ける
例：talkの時、相手の目を見て、口パクをする。
例：kissの時、相手の肩に手を置き、目を細める。

対象物が存在するとき、サイズなどによってアクションを変える。

例：grabで物をもつとき、ある程度サイズがあるものは両手でもつ。
例：eatで食べる時、小さいものは掴んで食べるが、大きいものは、顔を近づけてかぶりつく。


###キャラクター
プレイヤーが操るキャラとNPCを設ける。

以下の仕様をもったキャラをPrefab化し、チェックボックスなどでPlayerかNPCかを定義付けられるようにする。

##共通仕様
playerキャラは以下の仕様のキャラとする。

expression_test sceneのMeguの構造に従い、アニメーションと表情のコントローラをつける。
VRoidモデル(Meguなど)
アニメーション制御をVRMAnimationController
移動をCharacterNavigator
表情制御をVRMExpressionControllerで行う。

BipedIKを搭載。

Animation_test

HP,感情を持ち状態により表情を変化させる。

例：HPが低いとき、通常時の表情を辛そうにする。　magicを放つとき感情が喜びだと、笑った表情にする。

NPCは、プレイヤーからのインタラクションや周囲の状況によってこれらの行動を自律して行うようにしたい。



###魔法攻撃
特定の場所に向け魔法を放つ。RFX4_EffectEventなどを使用。


###Enemy
攻撃や魔法のターゲットになる物体やモンスター、キャラなど

キャラと同じく、HPをもつ。
HPの減少により物理が有効になり、ふっとばされたり、ラグドール化してぐったりしたり、パーティクルエフェクトを発生させるなどする。


###テスト

これらの機能を試すためのテストケースを考案する。
例としていかのようなもの。

・特定の場所に行き、指定した物（オブジェクト）を手に取る。　置く。

・特定の場所に行き、指定した場所を触る。さわりながら喋り、口パクや表情を変化させる。

・指定した地点に行き、そこから見えるターゲットに魔法を当てる。　ターゲットがダウンしたらひきずって特定の場所につれていくなど。

・椅子に座り、目の前のテーブルにある食べ物をつかみ、食べる。　表情を変化させ、味の感想をいう。

制作したい機能の全動作を確認できるようなテストケースを考える。



###カメラ機能
以下のような機能を持つものとする。
Playerなど対象物を中心に回転、ズームなど。

指示によって特定のオブジェクトにフォーカス


#アイデア
思い付きなので、よりよい方法があれば提案してほしい。

キャラの体や乗り物などインタラクション可能なオブジェクトにはターゲットポイントを設け、行動の時の目印にする。

キャラの場合

例：目のあたりにeye_pointを設けて、talkの時には相手のlookatのターゲットにする。
例：口元にmouse_pointを設けてeatの時に食べ物を持ってくる目標にしたり、kissのときに口を近づける目標にする。

例：肩や腰にポイントを設けて、hugのときに手を添えるようにする。

対象がEnemyの場合は、これらの点を目標に、魔法を飛ばしたり近接攻撃で踏んだりする。
Enemyの手足などにgrab_pointを設け、アンカーなどでそこをつながれぶら下げたり、Playerがそこを持って引きずったりできるようにする。

オブジェクトの場合
例：椅子や壁にsit_pointを設け、そこに座るようにする。


